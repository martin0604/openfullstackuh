(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),u=n(4),l=n(2),i=n(3),s=n.n(i),m="/api/persons",d=function(){return s.a.get(m)},f=function(e){return s.a.post(m,e)},p=function(e,t){return s.a.put("".concat(m,"/").concat(e),t)},b=function(e){return s.a.delete("".concat(m,"/").concat(e))},h=function(e){var t=e.filter,n=e.filterHandler;return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:t,onChange:n}))},g=function(e){var t=e.addName,n=e.name,a=e.phone,r=e.handleName,c=e.handlePhone;return o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:n,onChange:r}),o.a.createElement("br",null),"number: ",o.a.createElement("input",{value:a,onChange:c})),o.a.createElement("div",null,"debug: ",n),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.id,n=e.name,a=e.phone,r=e.deleteHandler;return o.a.createElement("div",null,o.a.createElement("label",null,n," ",a),o.a.createElement("button",{onClick:function(){return r(t)}},"Delete"),o.a.createElement("br",null))},E=function(e){var t=e.message,n=e.type;return""==t?null:o.a.createElement("div",{className:n},t)},y=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],m=i[1],y=Object(a.useState)(""),w=Object(l.a)(y,2),j=w[0],O=w[1],k=Object(a.useState)([]),N=Object(l.a)(k,2),S=N[0],C=N[1],T=Object(a.useState)(""),P=Object(l.a)(T,2),H=P[0],D=P[1],J=Object(a.useState)({message:"",type:""}),R=Object(l.a)(J,2),x=R[0],A=R[1];Object(a.useEffect)((function(){d().then((function(e){console.log("Promise fulfilled"),r(e.data),C(e.data)}))}),[]);var B=function(e){window.confirm("Do you really want to delete this person from phonebook?")&&b(e).then((function(t){console.log("Person deleted:",t),m(""),O(""),r(n.filter((function(t){return t.id!=e}))),C(n.filter((function(t){return t.id!=e})));A({message:"Record was deleted from phonebook.",type:"successful"}),setTimeout((function(){A({message:"",type:""})}),5e3)}))};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(E,{message:x.message,type:x.type}),o.a.createElement(h,{filter:H,filterHandler:function(e){console.log(e.target.value),D(e.target.value),C(n.filter((function(t){return t.name.includes(e.target.value)})))}}),o.a.createElement("h3",null,"Add new Contact"),o.a.createElement(g,{addName:function(e){e.preventDefault();var t={name:s,number:j};if(n.some((function(e){return e.name===s}))){if(window.confirm("".concat(s," is already added to phonebook. Replace the old number with a new one?"))){var a=n.find((function(e){return e.name===s})).id;p(a,t).then((function(e){m(""),O(""),D("");var t=n.map((function(e){return e.name==s?Object(u.a)(Object(u.a)({},e),{},{number:j}):e}));r(t),C(t);var a={message:"'".concat(s,"' was updated in phonebook."),type:"successful"};A(a),setTimeout((function(){A({message:"",type:""})}),5e3)})).catch((function(e){A({message:"The record you tried to delete has already been deleted from server.",type:"error"}),setTimeout((function(){A({message:"",type:""})}),5e3),r(n.filter((function(e){return e.id!=a}))),C(n.filter((function(e){return e.id!=a})))}))}}else r(n.concat(t)),m(""),O(""),D(""),C(n.concat(t)),f(t).then((function(e){console.log("New contact added to phonebook:",e);var t={message:"'".concat(s,"' was added to phonebook."),type:"successful"};A(t),setTimeout((function(){A({message:"",type:""})}),5e3)})).catch((function(e){A({message:e.response.data.error,type:"error"}),setTimeout((function(){A({message:"",type:""})}),5e3),console.log("Error al intentar agregar:",e.response.data.error)}));console.log("Clicked on submit button",e.target)},name:s,phone:j,handleName:function(e){console.log(e.target.value),m(e.target.value)},handlePhone:function(e){O(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),S.map((function(e){return o.a.createElement(v,{key:e.id,id:e.id,name:e.name,phone:e.number,deleteHandler:B})})),"...")};n(37);c.a.render(o.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9b1e2815.chunk.js.map